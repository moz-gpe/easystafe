% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/processar_esistafe_extracto.R
\name{processar_esistafe_extracto}
\alias{processar_esistafe_extracto}
\title{Processar ficheiros extraídos do e-SISTAFE}
\usage{
processar_esistafe_extracto(caminhos, lista_ugb)
}
\arguments{
\item{caminhos}{Vetor com os caminhos completos dos ficheiros a processar.}

\item{lista_ugb}{Vetor de UGBs válidas a passar para \code{processar_esistafe_extracto_unico()}.}
}
\value{
Um \code{tibble} consolidado contendo os dados processados de todos os
ficheiros, incluindo metadados adicionais.
}
\description{
Esta função aplica \code{processar_esistafe_extracto_unico()} a vários
ficheiros de extracto do e-SISTAFE, elimina duplicações ao combinar os
resultados e acrescenta metadados extraídos automaticamente do nome de cada
ficheiro através de \code{extrair_meta_extracto()}.
}
\details{
O fluxo inclui:
\itemize{
\item deduplicação após o processamento dos extractos individuais;
\item extração e anexação automática de metadados (tipo de reporte, datas, mês, ano);
\item gestão robusta de erros (ficheiros problemáticos não interrompem o fluxo).
}
\subsection{Variáveis financeiras disponíveis no dataframe final}{

O dataframe final contém métricas orçamentais padronizadas do e-SISTAFE.
Cada variável representa uma etapa do ciclo orçamental:
dotação → disponibilização → cabimentação → liquidação → pagamento.
\subsection{Lista de variáveis financeiras}{
\itemize{
\item \strong{dotacao_inicial} (\emph{Dotação Inicial}) —
Alocação inicial aprovada no Orçamento do Estado.
\item \strong{dotacao_revista} (\emph{Dotação Revista}) —
Alocação revista formalmente pelo Parlamento.
\item \strong{dotacao_actualizada} (\emph{Dotação Actualizada – DA}) —
Atualizações feitas pelo MEF dentro dos limites legais, sem revisão parlamentar.
\item \strong{dotacao_disponivel} (\emph{Dotação Disponível}) —
Liquidez efetivamente disponibilizada para execução.
\item \strong{dotacao_cabimentada} (\emph{Dotação Cabimentada – DC}) —
Montante cabimentado/comprometido com base na liquidez disponível.
\item \strong{ad_fundos} (\emph{Adiantamento de Fundos – AF}) —
Valores adiantados antes da execução; inclui, por exemplo, o mecanismo ADE para escolas.
\item \strong{despesa_paga_via_directa} (\emph{Despesa Paga Via Directa – DP}) —
Pagamentos efetuados diretamente ao fornecedor via e-SISTAFE.
\item \strong{ad_fundos_mais_dpvd} (\emph{AFDP – Adiantamento de Fundos + Despesa Paga VD}) —
Soma dos adiantamentos de fundos e das despesas pagas via direta.
\item \strong{liq_ad_fundos} (\emph{LAF – Adiantamentos de Fundos Liquidados}) —
Adiantamentos para os quais já existe fatura aceite, pendentes de pagamento.
\item \strong{despesa_liquidada_via_directa} (\emph{LVD – Despesa Liquidada Via Directa}) —
Despesas liquidadas diretamente no e-SISTAFE, com documento de liquidação emitido.
\item \strong{liq_ad_fundos_via_directa_lafvd} (\emph{LAFVD – Liquidação de AF + Via Directa}) —
Total de liquidações combinando adiantamentos liquidados e despesas liquidadas via direta.
}
}

}
}
\examples{
\dontrun{
arquivos <- list.files("Data/", pattern = "\\\\\\\\.xlsx$", full.names = TRUE)
df <- processar_esistafe_extracto(
  caminhos = arquivos,
  lista_ugb = c("010100001", "010100003")
)
}

}
